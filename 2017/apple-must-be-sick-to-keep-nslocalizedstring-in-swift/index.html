<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 苹果大概是有病，才会在 Swift 里面留下 NSLocalizedString · Inti's Blog</title><meta name="description" content="苹果大概是有病，才会在 Swift 里面留下 NSLocalizedString - Inti Guo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="search" type="application/opensearchdescription+xml" href="http://intii.com/atom.xml" title="Inti's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link shake"><img src="/Logo.svg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="https://twitter.com/int123c" target="_blank" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">苹果大概是有病，才会在 Swift 里面留下 NSLocalizedString</h1><div class="post-info">Apr 28, 2017</div><div class="post-content"><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> localized = <span class="type">NSLocalizedString</span>(<span class="string">"Something"</span>, comment: <span class="string">""</span>)</div></pre></td></tr></table></figure>
<p>这货真是又臭又长，<code>comment</code> 居然还没有默认值，照理来说，不是应该这样的吗：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> localized = <span class="string">"Something"</span>.localized</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>然而并没有，反倒是有 <code>localizedCapitalized</code>、<code>localizedUppercase</code> 和 <code>localizedLowercase</code>，简直是太精分了。所以还是手动加上吧。顺便再把字符串们包装起来。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> localized: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">NSLocalizedString</span>(<span class="keyword">self</span>, comment: <span class="string">""</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">localized</span><span class="params">(withComment comment: String)</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">NSLocalizedString</span>(<span class="keyword">self</span>, comment: comment)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Localized</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Universal</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">var</span> ok: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"Universal.ok"</span>.localized &#125;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">var</span> productionDate: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"Universal.productionDate"</span>.localized &#125;</div><div class="line">        <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">daysBeforeExpire</span><span class="params">(days: Int)</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="type">String</span>(format: <span class="string">"Universal.daysBeforeExpire"</span>.localized, days)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> ok = <span class="type">Localized</span>.<span class="type">Universal</span>.ok</div><div class="line"><span class="keyword">let</span> daysBeforeExpire = <span class="type">Localized</span>.<span class="type">Universal</span>.daysBeforeExpire(<span class="number">1</span>)</div><div class="line"><span class="type">Localized</span>() <span class="comment">// error</span></div></pre></td></tr></table></figure>
<p>这里用 <code>enum</code> 是因为没有 case 的 <code>enum</code> 没法创建实例, 用来做命名空间太适合不过；</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/a-better-way-to-display-a-book-cover-questionmark/" class="next">下一篇 →</a></div><div class="copyright"><p>© 2012 - 2017 Inti Guo, handcrafted under ☁︎ in the city of knockoffs.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>